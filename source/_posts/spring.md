title: 关于spring-mvc的一些思考
date: 2015-06-24 15:23:05
tags: mvc java
categories: java
---

* 这学期好忙，都没怎么写博客了。。
* 
###关于mvc的一点理解：
最近做的项目用到了java的springMVC框架，在做项目的时候看到书上的示例代码，对其中的service层有点摸不着头脑，以前很多代码都是直接写在controller里的，但现在突然感觉没有用到mvc的结构，于是就在网上查资料，得到下面一大段话（以下内容摘自网上）：
从字面的意思上来看，service是业务层，dao是数据访问层。
记得刚学编程的时候，都是在service里直接调用dao，service里面就new一个dao类对象，调用，其他有意义的事没做，因为也不知道应该在里面写些什么有意义的代码，也不明白有这个有什么用，甚至还觉得不要serivce层不更好，省点功夫，反正它不也就是copy了一次dao层然后改个名字而已么……
我们都知道，标准主流现在的编程方式都是采用MVC综合设计模式，MVC本身不属于设计模式的一种，它描述的是一种结构，最终目的达到解耦，解耦说的意思是你更改某一层代码，不会影响我其他层代码，如果你会像spring这样的框架，你会了解面向接口编程，表示层调用控制层，控制层调用业务层，业务层调用数据访问层。初期也许都是new对象去调用下一层，比如你在业务层new一个DAO类的对象，调用DAO类方法访问数据库，这样写是不对的，因为在业务层中是不应该含有具体对象，最多只能有引用，如果有具体对象存在，就耦合了。当那个对象不存在，我还要修改业务的代码，这不符合逻辑。好比主板上内存坏了，我换内存，没必要连主板一起换。我不用知道内存是哪家生产，不用知道多大容量，只要是内存都可以插上这个接口使用。这就是MVC的意义。
接下来说如果现在感觉不到service的存在意义，其实因为现在做东西分层次不是那么严格，在一个你们做东西业务本身也少，举个最简单的例子，你做一个分页的功能，数据1000条，你20条在一个页，你可以把这个功能写成工具类封装起来，然后在业务层里调用这个封装的方法，这才是业务里真正干得事，只要没访问数据库的，都要在业务里写。
比说你现在用的是SSH框架，做一个用户模块：
* 假设现在你做这个功能会用到user表和权限表，那么你前台的页面访问action，action再去调用用户模块service，用户模块service判断你是操作user表还是权限表，如果你操作的是user表则service的实现类就去调用userDAO。如果是操作的是权限表则调用权限的DAO
* 也就是说DAO一定是和数据库的每张表一一对应，而service则不是。明白的没？其实你一个项目一个service和一个DAO其实也一样可以操作数据库，只不过那要是表非常多，出问题了，那找起来多麻烦，而且太乱了
* 好处就是你的整个项目非常系统化，和数据库的表能一致，而且功能模块化，这样以后维护或者改错比较容易，性能也高一些
###初级DAO模式：
例如：写一个类 操作1张表 针对这张表的所有操作都以方法的形式写在这个类中 1个操作对应1个方法要求是外部通过调用这个类的方法达到操作某张表的目的时不需要写任何和数据库以及JDBC相关的代码，这个类的命名就是XXDAO
比如表叫做 t_goods 商品表那么操作它的DAO就叫GoodsDAO
###高级DAO模式：
例如：即DAO工厂模式，多个XXDAO实现同一个接口或者继承同一个基类，编写一个工厂类通过工厂模式（简单工厂模式或利用反射动态加载均可）获得接口或基类对象，内部实际上封装返回的是具体的XXDAO类的对象。简单的说即是在1的基础上将创建具体的XXDAO对象的方式由new变为工厂模式实现
例如：UserDAO dao = DAOFactory.create(...);
dao.save() 
dao.delete...
* ###总结
总结一下，其实mvc的真正目的是实现层与层之间的解耦和，控制层只负责接收和发送数据，service层负责业务逻辑，model层负责模型和数据库操作，层与层之间不能越界，controller层不能直接调用model层。这样，即使某一层出现了问题，对其他层的影响也会很小。
* 一些参考资料
    * [IBM——Java Web 专题](http://www.ibm.com/developerworks/cn/java/web/spring.html)
    * [SSH框架中service层的作用](http://blog.sina.com.cn/s/blog_7d73052b01016qa1.html)